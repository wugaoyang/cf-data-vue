<template>  <el-row class="query">    <view>      <el-input          v-model="queryData.ip"          style="max-width: 600px; width: 200px"          placeholder="请输入ip"          @keyup="search"          clearable      >        <template #prepend>ip</template>      </el-input>    </view>    <view>      <el-input          v-model="queryData.countryNameCN"          style="max-width: 600px; width: 200px"          placeholder="请输入国家名字"          @keyup="search"          clearable      >        <template #prepend>国家名字</template>      </el-input>    </view>    <view>      <el-input          v-model="queryData.countryCode"          style="max-width: 600px; width: 200px"          placeholder="请输入国家代码"          @keyup="search"          clearable      >        <template #prepend>国家代码</template>      </el-input>    </view>    <view>      <el-checkbox v-model="queryData.countryCodeIsNull" @change="search">国家代码为空</el-checkbox>    </view>    <view>      <el-select          v-model="queryData.status"          style="max-width: 600px; width: 150px"          @change="search"          clearable      >        <el-option label="全部" value=""></el-option>        <el-option label="启用" value="1">启用</el-option>        <el-option label="禁用" value="0">禁用</el-option>        <template #prefix>状态</template>      </el-select>    </view>    <view>      <el-select          v-model="queryData.reachable"          style="max-width: 600px; width: 150px"          @change="search"          aria-label=""          clearable      >        <el-option label="全部" value=""></el-option>        <el-option label="是" value="1">是</el-option>        <el-option label="否" value="0">否</el-option>        <template #prefix>可达</template>      </el-select>    </view>    <view>      <el-input          type="number"          v-model="queryData.delay1"          style="max-width: 600px; width: 200px"          placeholder="请输入延迟"          @keyup="search"          clearable      >        <template #prepend>延迟>=</template>      </el-input>    </view>    <view>      <el-input          type="number"          v-model="queryData.delay2"          style="max-width: 600px; width: 200px"          placeholder="请输入延迟"          @keyup="search"          clearable      >        <template #prepend>延迟<=</template>      </el-input>    </view>    <view>      <el-input          type="number"          v-model="queryData.speed1"          style="max-width: 600px; width: 200px"          placeholder="请输入速度"          @keyup="search"          clearable      >        <template #prepend>速度>=</template>      </el-input>    </view>    <view>      <el-input          type="number"          v-model="queryData.speed2"          style="max-width: 600px; width: 200px"          placeholder="请输入速度"          @keyup="search"          clearable      >        <template #prepend>速度<=</template>      </el-input>    </view>    <view>      <el-input          v-model="queryData.name"          style="max-width: 600px; width: 200px"          placeholder="请输入名字"          @keyup="search"          clearable      >        <template #prepend>名字</template>      </el-input>    </view>    <view>      <el-input          v-model="queryData.group"          style="max-width: 600px; width: 200px"          placeholder="请输入分组"          @keyup="search"          clearable      >        <template #prepend>分组</template>      </el-input>    </view>    <view>      <el-button type="primary" @click="search">查询</el-button>    </view>    <view>      <el-button type="primary" @click="reset">重置</el-button>    </view>    <view>      <el-input v-model="seconds"                type="number"                style="max-width: 600px; width: 120px"                @change="check">        <template #append>秒</template>      </el-input>    </view>    <view>      <el-checkbox v-model="autoRefresh">自动刷新</el-checkbox>    </view>  </el-row>  <el-table :data="bestIpList" style="width: 100%" v-loading="loading">    <el-table-column type="index" width="50"/>    <el-table-column prop="ip" label="IP" width="150"/>    <el-table-column prop="cityNameCN" label="城市(中文)"/>    <el-table-column prop="cityNameEN" label="城市(英文)"/>    <el-table-column prop="countryNameCN" label="国家名字"/>    <el-table-column prop="countryCode" label="国家代码"/>    <el-table-column prop="source" label="来源"/>    <el-table-column prop="delay" label="延迟(ms)"/>    <el-table-column prop="speed" label="速度(MB/s)"/>    <el-table-column prop="status" label="状态"/>    <el-table-column prop="name" label="名字" width="180"/>    <el-table-column prop="group" label="分组"/>    <el-table-column prop="updatedTime" width="170" label="更新时间"/>  </el-table>  <!--  <vxe-table-->  <!--      border-->  <!--      height="500"-->  <!--      :loading="loading"-->  <!--      :data="bestIpList">-->  <!--    <vxe-table-column type="index" width="50"/>-->  <!--    <vxe-table-column field="ip" title="IP" width="180"/>-->  <!--    <vxe-table-column field="name" title="名字" width="180"/>-->  <!--    <vxe-table-column field="group" title="分组"/>-->  <!--    <vxe-table-column field="area" title="区域"/>-->  <!--    <vxe-table-column field="speed" title="速度(MB/s)"/>-->  <!--    <vxe-table-column field="status" title="状态"/>-->  <!--    <vxe-table-column field="updatedTime" title="更新时间"/>-->  <!--  </vxe-table>-->  <vxe-pager      v-model:currentPage="pageVO.pageIndex"      v-model:pageSize="pageVO.pageSize"      :total="pageVO.total"      @page-change="getIpList">  </vxe-pager></template><script lang="ts" setup>import {reactive, ref} from 'vue'import IpInfoApi from "@/api/IpInfoApi";const pageVO = reactive({  total: 10,  pageIndex: 1,  pageSize: 10})let query = {  name: '',  group: '',  status: '',  countryCode: '',  countryNameCN: '',  reachable: '',  ip: '',  delay1: '',  delay2: '',  speed1: '',  speed2: '',  countryCodeIsNull: false};const queryData = reactive(query)const loading = ref(true)const bestIpList = ref([])const autoRefresh = ref(false)const seconds = ref(3)getIpList()let interval = setInterval(() => {  if (autoRefresh.value && !loading.value) {    getIpList();  }}, seconds.value * 1000)function check() {  clearInterval(interval)  seconds.value = seconds.value < 1 ? 1 : seconds.value;  interval = setInterval(() => {    if (autoRefresh.value && !loading.value) {      getIpList();    }  }, seconds.value * 1000)}function search() {  pageVO.pageIndex = 1;  getIpList()}function reset() {  queryData.name = '';  queryData.group = '';  queryData.status = '';  queryData.countryCode = '';  queryData.countryNameCN = '';  queryData.reachable = '';  queryData.ip = '';  queryData.delay1 = '';  queryData.delay2 = '';  queryData.speed1 = '';  queryData.speed2 = '';  queryData.countryCodeIsNull = false;  pageVO.pageIndex = 1  getIpList()}function getIpList() {  loading.value = true  let query = {    data: queryData,    pageVO: pageVO  }  IpInfoApi.page(query).then(res => {    bestIpList.value = res.data.data    pageVO.total = res.data.total    loading.value = false  })}</script><style>.query view {  margin: 5px 5px 5px;}</style>